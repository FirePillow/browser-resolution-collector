<!DOCTYPE html>
<html>
<head>
	<title>A secret investigation</title>
	<script type="text/javascript">
	function collect(){
		var button = document.getElementById("collect");
		button.disabled=true;
			const size = String(window.screen.width)+"x"+String(window.screen.height);
			console.log(size);
			fetch('/api', {
			    body: "size="+size,
			    cache: 'no-cache',
			    headers: {'content-type': 'application/x-www-form-urlencoded'},
		    	method: 'POST',
		    })
		    .then(function(response){window.location=response.url})
		    .catch(err =>{
			info="Process failed, probably slow internet connection\n\n";
			info+="Please try again in better internet, if it fails for muiltiple times call Mike and show follwing message\n\n";
			info+=err.message;
			alert(info);
			button.disabled=false;
		});
	}
	</script>
</head>
<body>
	Hello, it's me, Mike.
	Because of my CAS, I need to collect several data of your browser.<br>
	I won't collect your private information, I will only collect the resolution in your browser.<br>
	Click the following button to help me automatically collect the data.<br>
	<button onclick="collect()" id="collect">the following button</button>
</body>
</html>